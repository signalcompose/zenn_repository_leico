---
title: Midiを読み込むクラスを実装する
---


# 工事中

[前回のチャプター](./11) では、Midiファイルを読み込む時に必要な `MidiFileObjectFactoryModule` を作成しました。
このチャプターでは `MidiFileObjectFactoryModule` に `MidiFileObjectFactory` クラスを追加し、Midiファイルを読み込む機能を追加します。

## 機能の解説

このクラスの役割をまず解説します。
このクラスでは `.mid` や `.midi` というファイルをエディタに読み込む機能を提供します。
読み込む際、 uasset への変換を行う必要がありますが、 uasset への変換は `MidiFileObject` の方で行います。
受け取った midi ファイルを `MidiFileObject` へ渡し、処理された uasset を受け取りエディタに渡すといった、橋渡しの機能を行います。

## `MidiFileObjectFactory` クラスの作成

それでは早速この機能を作っていきます。まずは `MidiFileObjectFactoryModule` フォルダ内に `MidiFileObjectFactory` クラスを作成します。
クラスの基本的な作成方法は [Chapter 07](./07) で解説していますが、今回は以下のような設定が必要です。

### 1. 親クラスをFactory ( `UFactory` )にする

![親クラスをFactoryに変更する](/images/books/ue_midi_file_plugin/12/01.png)

ファイルを読み込み作成する機能へのインターフェイスはFactoryクラスが提供しているため、親クラスはFactoryを指定します。
`~~Factory~~` という別クラスが多いため注意してください。

### 2. privateクラスで、 `MidiFileObjectFactoryModule` モジュール内に作成する

![privateクラスで `MidiFileObjectFactoryModule` 内に作成する](/images/books/ue_midi_file_plugin/12/02.png)

private クラス(橙) にするのはエディタが自動的に呼び出す時以外使われないようにするためです。
